(this.webpackJsonpneighborwoods=this.webpackJsonpneighborwoods||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(12),c=n.n(s),i=(n(21),n(3)),o=n(2),u=(n(22),n(4)),j=n.n(u),l=n(5);function b(e){return d.apply(this,arguments)}function d(){return d=Object(l.a)(j.a.mark((function e(t){var n,r,a,s,c,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",r=i.length>2&&void 0!==i[2]?i[2]:null,a={method:n},r&&(a.headers={"Content-Type":"application/json"},a.body=JSON.stringify(r)),(s=g())&&(a.headers=a.headers||{},a.headers.Authorization="Bearer ".concat(s)),e.next=8,fetch(t,a);case 8:if(!(c=e.sent).ok){e.next=11;break}return e.abrupt("return",c.json());case 11:throw new Error("Bad Request");case 12:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}var h="/api/users";function p(e){return b(h,"POST",e)}function O(e){return b("".concat(h,"/login"),"POST",e)}function m(e){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return n=e.sent,localStorage.setItem("token",n),e.abrupt("return",w());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:return n=e.sent,localStorage.setItem("token",n),e.abrupt("return",w());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=localStorage.getItem("token");return e?JSON.parse(window.atob(e.split(".")[1])).exp<Date.now()/1e3?(localStorage.removeItem("token"),null):e:null}function w(){var e=g();return e?JSON.parse(window.atob(e.split(".")[1])).user:null}n(24);var y=n(7),S=n(9),N=n(13),C=n(14),k=n(16),A=n(15),U=n(0),q=function(e){Object(k.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(N.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:"",email:"",phone:"",password:"",confirm:"",error:""},e.handleSubmit=function(){var t=Object(l.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,delete(r=Object(S.a)({},e.state)).error,delete r.confirm,t.next=7,m(r);case 7:a=t.sent,e.props.setUser(a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.setState({error:"Sign Up Failed - Try Again"});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n;e.setState((n={},Object(y.a)(n,t.target.name,t.target.value),Object(y.a)(n,"error",""),n))},e}return Object(C.a)(n,[{key:"render",value:function(){var e=this.state.password!==this.state.confirm;return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"form-container",children:Object(U.jsxs)("form",{autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(U.jsx)("label",{children:"Name"}),Object(U.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange,required:!0}),Object(U.jsx)("label",{children:"Email"}),Object(U.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(U.jsx)("label",{children:"Phone"}),Object(U.jsx)("input",{type:"phone",name:"phone",value:this.state.phone,onChange:this.handleChange,required:!0}),Object(U.jsx)("label",{children:"Password"}),Object(U.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(U.jsx)("label",{children:"Confirm"}),Object(U.jsx)("input",{type:"password",name:"confirm",value:this.state.confirm,onChange:this.handleChange,required:!0}),Object(U.jsx)("button",{type:"submit",disabled:e,children:"SIGN UP"})]})}),Object(U.jsxs)("p",{className:"error-message",children:["\xa0",this.state.error]})]})}}]),n}(r.Component);function I(e){var t=e.setUser,n=Object(r.useState)({email:"",password:""}),a=Object(i.a)(n,2),s=a[0],c=a[1],o=Object(r.useState)(""),u=Object(i.a)(o,2),b=u[0],d=u[1];function h(e){c(Object(S.a)(Object(S.a)({},s),{},Object(y.a)({},e.target.name,e.target.value))),d("")}function p(){return(p=Object(l.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f(s);case 4:r=e.sent,t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d("Log In Failed - Try Again");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"form-container",onSubmit:function(e){return p.apply(this,arguments)},children:Object(U.jsxs)("form",{autoComplete:"off",children:[Object(U.jsx)("label",{children:"Email"}),Object(U.jsx)("input",{type:"text",name:"email",value:s.email,onChange:h,required:!0}),Object(U.jsx)("label",{children:"Password"}),Object(U.jsx)("input",{type:"password",name:"password",value:s.password,onChange:h,required:!0}),Object(U.jsx)("button",{type:"submit",children:"LOG IN"})]})}),Object(U.jsxs)("p",{className:"error-message",children:["\xa0",b]})]})}function P(e){var t=e.setUser,n=Object(r.useState)(!1),a=Object(i.a)(n,2),s=a[0],c=a[1];return Object(U.jsxs)("main",{className:"AuthPage",children:[Object(U.jsxs)("div",{className:"auth-content",children:[Object(U.jsx)("img",{src:"images/nw-logo.jpeg",alt:"NW Logo"}),Object(U.jsx)("h4",{children:"Get a tree!"}),Object(U.jsxs)("div",{className:"auth-forms",children:[Object(U.jsxs)("div",{className:"auth-toggle",children:[Object(U.jsx)("p",{children:s?"Already a user?":"Need to create an account?"}),Object(U.jsx)("button",{onClick:function(){return c(!s)},children:s?"Log In":"Sign Up"})]}),s?Object(U.jsx)(q,{setUser:t}):Object(U.jsx)(I,{setUser:t})]})]}),Object(U.jsx)("div",{className:"tree-liner"})]})}function T(){return b("".concat("/api/orders","/"))}n(26);function E(e){var t=e.order;return Object(U.jsx)("div",{className:"OrderCard",children:Object(U.jsx)("p",{children:t.address})})}function J(e){e.user;var t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){function e(){return e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(U.jsx)("main",{className:"OrderHistoryPage",children:a.length?Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{children:"Your tree orders"}),Object(U.jsx)("div",{children:a.map((function(e){return Object(U.jsx)(E,{order:e})}))})]}):Object(U.jsx)("h1",{children:"No orders yet"})})}function L(){return b("".concat("/api/trees","/available"))}n(27),n(28);function z(e){var t=e.tree;return Object(U.jsxs)("div",{className:"TreeCard",children:[Object(U.jsxs)("h4",{children:[t.name," (",t.stature,")"]}),Object(U.jsx)("p",{children:Object(U.jsx)("span",{className:"italic",children:t.species})}),Object(U.jsx)("p",{children:t.description})]})}function D(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){return e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(U.jsx)("main",{className:"AvailTreesPage",children:Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{children:"Available trees"}),Object(U.jsx)("div",{children:n.map((function(e){return Object(U.jsx)(z,{tree:e})}))})]})})}function G(){var e=Object(r.useState)({street:"",zip:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1];function b(e){a(Object(S.a)(Object(S.a)({},n),{},Object(y.a)({},e.target.name,e.target.value))),u("")}function d(){return(d=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"form-container",onSubmit:function(e){return d.apply(this,arguments)},children:Object(U.jsxs)("form",{autoComplete:"off",children:[Object(U.jsx)("label",{children:"Street address"}),Object(U.jsx)("input",{name:"address",value:n.address,onChange:b,required:!0}),Object(U.jsx)("label",{children:"Zip Code"}),Object(U.jsx)("input",{name:"zip",value:n.zip,onChange:b,required:!0}),Object(U.jsx)("button",{type:"submit",children:"Validate Address"})]})}),Object(U.jsxs)("p",{className:"error-message",children:["\xa0",o]})]})}n(29);function B(e){e.user;var t=Object(r.useState)(""),n=Object(i.a)(t,2),a=(n[0],n[1],Object(r.useState)(!1)),s=Object(i.a)(a,2);s[0],s[1];return Object(U.jsx)("main",{className:"NewOrderPage",children:Object(U.jsx)(G,{})})}n(30);var F=n(8);function W(e){return Object(U.jsxs)("aside",{className:"side-nav",children:[Object(U.jsxs)("h3",{children:["Welcome, ",e.user.name]}),Object(U.jsx)(F.b,{to:"orders",children:"All Orders"}),Object(U.jsx)(F.b,{to:"orders/new",children:"New Order"}),Object(U.jsx)(F.b,{to:"trees/available",children:"See Available Trees"}),Object(U.jsx)(F.b,{to:"",children:"Settings"}),Object(U.jsx)(F.b,{to:"",onClick:function(){localStorage.removeItem("token"),e.setUser(null)},children:"Log Out"})]})}function H(){var e=Object(r.useState)(w()),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(U.jsx)("main",{className:"App",children:n?Object(U.jsxs)("div",{className:"main-content",children:[Object(U.jsx)(W,{user:n,setUser:a}),Object(U.jsxs)(o.d,{children:[Object(U.jsx)(o.b,{path:"/orders",element:Object(U.jsx)(J,{user:n})}),Object(U.jsx)(o.b,{path:"/orders/new",element:Object(U.jsx)(B,{user:n})}),Object(U.jsx)(o.b,{path:"/trees/available",element:Object(U.jsx)(D,{})}),Object(U.jsx)(o.b,{path:"/*",element:Object(U.jsx)(o.a,{to:"/orders"})})]})]}):Object(U.jsx)(P,{setUser:a})})}c.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(F.a,{children:Object(U.jsx)(H,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.7e057b56.chunk.js.map